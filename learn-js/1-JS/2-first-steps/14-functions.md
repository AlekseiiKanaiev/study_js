# Функции

Функции являются основными строительными блоками программ.

## Объявление функции

```js
function showMessage() {
  alert( 'Всем привет!' );
}
```

Сначала идет ключевое слово - function, после него название функции, затем список параметров в круглых скобках. Далее код функции - тело функции внутри фигурных скобок.

Вызов `showMessage()` выполняет код функции.

## Локальные переменные

Переменные, которые объявлены внутри функции, видны только в этой функции.

## Внешние переменные

У функции есть доступ к внешним переменным, например:

```js run no-beautify
let *!*userName*/!* = 'Вася';

function showMessage() {
  let message = 'Привет, ' + *!*userName*/!*;
  alert(message);
}

showMessage(); // Привет, Вася
```

Функция обладает полным доступом к внешним переменным и может изменять их значение.

```js run
let *!*userName*/!* = 'Вася';

function showMessage() {
  *!*userName*/!* = "Петя"; // (1) изменяем значение внешней переменной

  let message = 'Привет, ' + *!*userName*/!*;
  alert(message);
}

alert( userName ); // *!*Вася*/!* перед вызовом функции

showMessage();

alert( userName ); // *!*Петя*/!*, значение внешней переменной было изменено функцией
```
Если внутри функции объявляется переменная с идентичным именем к уже существующей внешней, то он перекрывает внешнюю.

## Параметры

Мы можем передать внутрь функции любые данные, исползуя параметры.

Параметры передаются в скобках, через запятые.

```js run
function showMessage(from, text) { // аргументы: from, text
  alert(from + ': ' + text);
}


showMessage('Аня', 'Привет!'); // Аня: Привет! (*)
showMessage('Аня', "Как дела?"); // Аня: Как дела? (**)

```

!!! Когда функция вызывается в строках `(*)` и `(**)`, переданные значения копируются в `локальные` переменные `from` и `text`. Затем они используются в теле функции.

Вот ещё один пример: у нас есть переменная `from`, и мы передаём её функции. Обратите внимание: функция изменяет значение `from`, но это изменение не видно снаружи. Функция всегда получает только копию значения:
```js run
function showMessage(from, text) {

*!*
  from = '*' + from + '*'; // немного украсим "from"
*/!*

  alert( from + ': ' + text );
}

let from = "Аня";

showMessage(from, "Привет"); // *Аня*: Привет

// значение "from" осталось прежним, функция изменила значение локальной переменной
alert( from ); // Аня
```

## Параметры по умолчанию

Если параметр не указан, то его значением становится `undefined`.

Например, вышеупомянутая функция `showMessage(from, text)` может быть вызвана с одним аргументом:

```js
showMessage("Аня");
```

Это не приведет к ошибке. Такой вызов выведет `"Аня: undefined"`.
Если мы хотим задать параметр `text` по умолчанию, мы должны указать его после `=`:
```js run
function showMessage(from, *!*text = "текст не добавлен"*/!*) {
  alert( from + ": " + text );
}

showMessage("Аня"); // Аня: текст не добавлен
```

Теперь, если параметр `text` не указан, его значением будет `"текст не добавлен"`.
Мы можем указать и более сложное выражение. 

```js run
function showMessage(from, text = anotherFunction()) {
  // anotherFunction() выполнится только если не передан text
  // результатом будет значение text
}
```
## Возврат значения

Функция может вернуть результат, который будет предан в вызвавший ее код.
```js run no-beautify
function sum(a, b) {
  *!*return*/!* a + b;
}

let result = sum(1, 2);
alert( result ); // 3
```

Директива `return` может находиться в любом месте тела функции. Как только выполнение доходит до этого места, функция останавливается и значение возвращается в вызвавший ее код. (присваивается переменной).

Вызовов `return` может быть несколько.
```js run
function checkAge(age) {
  if (age > 18) {
*!*
    return true;
*/!*
  } else {
*!*
    return confirm('А родители разрешили?');
*/!*
  }
}

let age = prompt('Сколько вам лет?', 18);

if ( checkAge(age) ) {
  alert( 'Доступ получен' );
} else {
  alert( 'Доступ закрыт' );
}
```

Возможно использовать `return` и без значения. В таком случае функция возвращает `undefined`.



